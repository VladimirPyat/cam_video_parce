Данный код помогает искать на видео различные объекты при помощи yolov8 Найденные объекты сохраняются в файлах формата jpg

до начала работы скрипта необходимо указать параметры:

SOURCE_DIR - путь для поиска видео файлов RESULT_DIR - путь для сохранения файлов изображений (при отсутствии создаст автоматически)

CAM_AREAS - словарь, содержащий имя камеры в качестве ключа и кортеж из координат области детекции в качестве значений список координат имеет вид x_percent, y_percent, w_percent, h_percent - координата х у левого верхнего угла, а также ширина и высота области в процентах от размера изображения задается опытным путем, с учетом расположения камер

CLASSES_TO_DETECT - список номеров классов объектов yolov8 которые нужно обнаружить на видео

FRAMES_SKIP - для ускорения обработки и облегчения получившегося набора изображений, можно обнаруживать объекты не на всех кадрах, а пропускать какое-то количество

для запуска скрипта нужно выполнить функцию video_path_proceed() данная функция ищет в директории SOURCE_DIR файлы с нужным расширением (по умолчанию mp4) и сохраняет результат в RESULT_DIR

также можно указать конкретный файл video_proceed(video_filename)

после обработки каждого видеофайла в консоль выводится количество сохраненных изображений и затраченное время

также предусмотрен (но пока не реализован) метод is_obj_motion(result) для проверки, движется ли наблюдаемый объект гипотеза: если координаты центра bounding_box для обнаруженного объекта на последних N кадрах меняются не более чем на P процентов - объект не движется для неподвижного объекта будет достаточно N кадров. новые после этого можно не сохранять

для реализации данного метода можно запустить детектирование объектов с параметром predictions = model.predict(save_txt=True) координаты bounding_box сохраняются в текстовом файле, далее можно их обработать